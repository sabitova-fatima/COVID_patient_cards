# COVID patient cards

### Анализ карт пацентов, больных коронавирусом

## 1. Зачем?

Есть гипотеза, что свертываемость крови играет значительную роль в развитии болезни. Из-за чего были начаты исследования течения этого заболевания у пациентов одной из московских больниц.

Имелось 600+ карт пацентов, написанных более-менее свободным языком, информацию из которых нужно было достать для анализа. Примерное время на обработки карт одного пацента - 5-10 часов. Автоматизировать обработку было сложно из-за того, что карты заполнялись людьми и для людей.

> Член корреспондент РАН Фазли Атауллаханов: "Я ищу добровольцев для борьбы с COVID-19"
> <https://philologist.livejournal.com/11454551.html>

Данная работа - попытка автоматизировать сбор 50-70% данных. В основном, удачная

## 2. Как?

С помощью stringr на языке R

Типичная строка кода выглядела как-то так:

```
patients$Диастолическое_давление[i] <- str_sub(str_extract((patients_in[[i]]
                                       [which(str_detect(patients_in[[i]], "Диастолическое"))[1]]), 
                                       "Диастолическое\\sдавление:.............."), start = 26, end = 28)
```
Здесь применяются функции str_sub(), str_extract() и str_detect() из библиотеки stringr и регулярные выражения для поиска ключевых слов. 

### 3. Что получилось?

Из 600+ карт получилось сделать две таблицы с данными 
1. При поступлении - более подробные измерения

[Скрипт для поступления](https://github.com/sabitova-fatima/COVID_patient_cards/blob/master/check_in_data.R)

2. Ежедневные исследования (до 10-15 для каждого пациента)

[Скрипт для ежедневных осмотров](https://github.com/sabitova-fatima/COVID_patient_cards/blob/master/staying_in_data.R)

Итог:

![](https://github.com/sabitova-fatima/COVID_patient_cards/blob/master/pictures/результаты.png)

В дальнейшем будут собраны также другие данные (в том числе анализы крови КТ, так как информация о них представлена в более сложных для автоматизации форматах).


